require_relative './config/environment'
require 'sinatra/activerecord/rake'
# task :foo_task => [:environment] do
desc "Runs a Pry console"
task :console do
  ActiveRecord::Base.logger = Logger.new(STDOUT)
  
  # Open a Pry session
  Pry.start
end
task :scrape do
  require_relative './lib/jumia'
  require 'pry'
  jum = JumiaScraper.new

  jum.get_category_urls.each do |products|
    prod_details = ProductDetail.new()
    prod = Product.new()
    binding.pry
    prod.createproduct({:product_id =>products[:name], :product_name=>products[:name]})
  end
end